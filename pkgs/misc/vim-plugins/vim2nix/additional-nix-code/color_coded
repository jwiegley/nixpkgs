    buildInputs = [
      stdenv
      cmake
      lua51Packages.lua
      ncurses
      zlib
      llvm_39
      llvmPackages.clang.cc
    ];
    buildPhase = ''
      patchShebangs .
      sed -i "s/add_dependencies(\S\+ \S\+_track_api)//" CMakeLists.txt

      clang_version=$(clang --version | head -1 | sed 's/clang version \(\S\+\).*/\1/')
      . ./lib/generate_sources ${llvm_39} $clang_version

      cmake -DDOWNLOAD_CLANG=0 .
      make
    '';
